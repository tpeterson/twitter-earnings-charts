{"version":3,"sources":["ad_price_vol.js"],"names":["plotStat","earnings_stats","d","attr","d3","line","x","xScale","indexOf","on","yScale","text","bar_area","drawLine","stat_class","quarter","enter","select","stat_name","stat_label","total_engagements","cost_per_engagement","scaleLinear","domain","range","max","append","selectAll","data"],"mappings":"cAAC,WAqEO,QAAAA,GAAcC,EAAAA,EAAuBC,GACtC,GACAC,GAAWC,GAAAC,OACVC,EAAA,SAAOJ,GAERC,MAXHI,GAWaN,EAAYO,QAAAN,MAGtBO,EAdH,SAAAP,GAeIE,MAAA,KAAUM,EAAVR,EAAuBS,KApB3BC,GAwBFZ,OAAS,QACTA,KAAS,IAAAa,EAAAZ,IAtBJE,KAAK,QAASW,GAyBjBF,EAASG,UAAT,UAAAD,IACCX,KAAKF,GACNe,QACCb,OAAK,UACNA,KAAO,QAAAW,GALTX,KAAA,KAAA,SAAAD,GAOGe,MAAOV,GAAAN,EAAVO,QAA2CP,MAEtCE,KAFL,KAAA,SAAAD,GA5FF,MAAA,KAAAQ,EAAAR,EAAAgB,MA0EOf,KAAK,IAAK,SAASD,GAClB,MAAO,KAERO,GAAG,QAAS,SAASP,GACpBE,GAAGa,OAAO,aAAaN,KAAQQ,EAA/B,KAA8CjB,EAAEgB,IAAc,EAAjB,QAA8BhB,EAAEgB,GAAhC,UAAyDhB,EAAEgB,IAAxG,uBAA2IhB,EAAEa,QAA7I,OA7EN,GAAMd,KADPc,QAAW,UACVK,kBAAwB,GACtBC,oBADsB,KAGtBN,QAAA,UAHqBK,kBAIpB,GACDC,oBADC,IAGDN,QAAA,UAPqBK,kBAQpB,IACDC,qBADC,KAGDN,QAAA,UAXqBK,kBAYpB,IACDC,qBADC,KAGDN,QAAA,UAfqBK,kBAgBpB,IACDC,qBADC,KAGDN,QAAA,UAnBqBK,kBAoBpB,IACDC,qBADC,KAGDN,QAAA,UAvBqBK,kBAwBpB,GACDC,qBADC,KAGDd,EAAAH,GAAAkB,cAAwBC,QA3B1B,EA6BAtB,EAAkBqB,OAAAA,IAOlBE,OAGI,GAHmC,MAUjCZ,EAAWR,GAAGa,cAAOM,QATzB,EAWFnB,GAAAqB,IAASzB,EAASkB,SAAWJ,GAC3B,MAAMD,GAAAA,sBAAWW,OAKb,EACD,MATCZ,EAAWR,GAAGa,OAAO,eAAeS,OAAO,KAAKvB,KAAK,KAAM,WAmCjEH,GAAS,oBAAqB,WAAY,4BAC1CA,EAAS,sBAAuB,WAAY,+BAE5CY,EAASe,UAAU,gBAAgBC,KAAK3B,GAAgBe,QAAQU,OAAO,QAAQvB,KAAK,QAAS,cAAcQ,KAAK,SAAST,GACvH,MAAOA,GAAEa,UACRZ,KAAK,IAAK,KAAKA,KAAK,IAAK,SAASD,GACnC,MAAOK,GAAON,EAAeO,QAAQN,MACpCC,KAAK,YAAa,SAASD,GAC5B,MAAO,aAAgBK,EAAON,EAAeO,QAAQN,IAAO,UAE9DE,GAAGa,OAAO,qBAAqBN,KAAKP,GAAGqB,IAAIxB,EAAgB,SAASC,GAClE,MAAOA,GAAEkB,oBACN","file":"ad_price_vol.js","sourcesContent":["(function() {\n  const earnings_stats = [{\n    'quarter': 'Q1 2015',\n    'total_engagements': 32,\n    'cost_per_engagement': 30\n  }, {\n    'quarter': 'Q2 2015',\n    'total_engagements': 53,\n    'cost_per_engagement': 6\n  }, {\n    'quarter': 'Q3 2015',\n    'total_engagements': 165,\n    'cost_per_engagement': -39\n  }, {\n    'quarter': 'Q4 2015',\n    'total_engagements': 153,\n    'cost_per_engagement': -41\n  }, {\n    'quarter': 'Q1 2016',\n    'total_engagements': 208,\n    'cost_per_engagement': -56\n  }, {\n    'quarter': 'Q2 2016',\n    'total_engagements': 226,\n    'cost_per_engagement': -64\n  }, {\n    'quarter': 'Q3 2016',\n    'total_engagements': 91,\n    'cost_per_engagement': -44\n  }];\n  const xScale = d3.scaleLinear().domain([\n    0,\n    earnings_stats.length - 1\n  ]).range([\n    25,\n    500\n  ]);\n  const yScale = d3.scaleLinear().domain([\n    0,\n    d3.max(earnings_stats, function(d) {\n      return d.total_engagements;\n    })\n  ]).range([\n    0,\n    175\n  ]);\n\n  const bar_area = d3.select('#main_chart').append('g').attr('id', 'bar_area');\n\n  function plotStat(stat_name, stat_class, stat_label) {\n    const drawLine = d3.line()\n      .x(function(d) {\n        return xScale(earnings_stats.indexOf(d));\n      })\n      .y(function(d) {\n        return 200 - yScale(d[stat_name]);\n      });\n\n    bar_area\n      .append('path')\n      .attr('d', drawLine(earnings_stats))\n      .attr('class', stat_class);\n\n    bar_area.selectAll(`circle${[stat_class]}`)\n      .data(earnings_stats)\n      .enter()\n      .append('circle')\n      .attr('class', stat_class)\n      .attr(\"cx\", function(d) {\n        return xScale(earnings_stats.indexOf(d));\n      })\n      .attr(\"cy\", function(d) {\n        return 200 - yScale(d[stat_name]);\n      })\n      .attr(\"r\", function(d) {\n        return 5;\n      })\n      .on('click', function(d) {\n        d3.select('#bar_info').text(`${stat_label} ${(d[stat_name] >= 0) ? `grew ${d[stat_name]}` : `shrank ${d[stat_name]}`}% year-over-year in ${d.quarter}.`);\n      });\n  }\n\n  plotStat('total_engagements', 'stat_one', 'Number of ad engagements');\n  plotStat('cost_per_engagement', 'stat_two', 'Average cost-per-engagement');\n\n  bar_area.selectAll('text.x_label').data(earnings_stats).enter().append('text').attr('class', 'axis_label').text(function(d) {\n    return d.quarter;\n  }).attr('y', 300).attr('x', function(d) {\n    return xScale(earnings_stats.indexOf(d));\n  }).attr('transform', function(d) {\n    return 'rotate(90 ' + (xScale(earnings_stats.indexOf(d))) + ' 300)';\n  });\n  d3.select('text#y_axis_label').text(d3.max(earnings_stats, function(d) {\n    return d.total_engagements;\n  }) + '%');\n}());\n"]}