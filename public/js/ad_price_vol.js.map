{"version":3,"sources":["ad_price_vol.js"],"names":["plotStat","yScale","stat_name","stat_label","attr","d3","line","x","d","on","xScale","earnings_stats","indexOf","y","append","bar_area","selectAll","stat_class","enter","select","total_engagements","text","quarter","cost_per_engagement","scaleLinear","domain","range","max","data"],"mappings":"cAAC,WAkFO,QAAAA,GAAaC,EAASC,EAAtBC,GACD,GACAC,GAAUC,GAAAC,OACTC,EAAA,SAAAC,GAEDC,MAAGC,GAASC,EAAYC,QAAAJ,MAd3BK,EAAA,SAAAL,GAiBD,MAAA,KAAAP,EAAAO,EAAAN,KAGDF,GAxBKc,OAAO,QA0BZC,KAASC,IAAAA,EAAUL,IACjBP,KAAOI,QAAPS,GAEAF,EAAOL,UAAP,UAA6BE,IAC5BR,KAAKO,GACNO,QALFJ,OAAA,UAOGK,KAAO,QAAAF,GACRb,KAAOI,KAAEY,SAAAA,GACN,MAFLV,GAAAC,EAAAC,QAAAJ,MArBKJ,KAAK,KAAM,SAASI,GACnB,MAAO,KAAMP,EAAOO,EAAEN,MAEvBE,KAAK,IAAK,SAASI,GAClB,MAAO,KAERC,GAAG,QAAS,SAASD,GACpBH,GAAGc,OAAO,aAAaE,KAAQlB,EAA/B,KAA8CK,EAAEN,IAAc,EAAjB,QAA8BM,EAAEN,GAAhC,UAAyDM,EAAEN,IAAxG,uBAA2IM,EAAEc,QAA7I,OAvFN,GAAMX,KADPW,QAAW,UACJX,kBAAkB,GACpBY,oBADoB,KAGpBD,QAAA,UACCF,kBAAA,GACDG,oBADC,IAGDD,QAAA,UACCF,kBAAA,IACDG,qBADC,KAGDD,QAAA,UACCF,kBAAA,IACDG,qBADC,KAGDD,QAAA,UACCF,kBAAA,IACDG,qBADC,KAGDD,QAAA,UACCF,kBAAA,IACDG,qBADC,KAGDD,QAAA,UACCF,kBAAA,GACDG,qBADC,KAGDD,QAAA,UACCF,kBAAA,IACDG,qBADC,KAKHD,QAAA,UACEF,kBADF,IAEEG,qBAFF,KAMIb,EAASL,GAAGmB,cAAcC,QAOhC,EAGId,EAASS,OAAAA,IAHEM,OAHb,GAaF,MAEAzB,EAASD,GAASE,cAAWe,QAC3B,EAEIZ,GAAAsB,IAAAhB,EAAcA,SAAeC,GAFhB,MAIZJ,GAAAY,sBAJYM,OAPjB,EAeAX,MAWIA,EAAOL,GAAOC,OAAAA,eAAAG,OAAd,KAAAV,KAAA,KAAA,WAaNJ,GAAS,oBAAqB,WAAY,4BAC1CA,EAAS,sBAAuB,WAAY,+BAE5Ce,EAASC,UAAU,gBAAgBY,KAAKjB,GAAgBO,QAAQJ,OAAO,QAAQV,KAAK,QAAS,cAAciB,KAAK,SAASb,GACvH,MAAOA,GAAEc,UACRlB,KAAK,IAAK,KAAKA,KAAK,IAAK,SAASI,GACnC,MAAOE,GAAOC,EAAeC,QAAQJ,MACpCJ,KAAK,YAAa,SAASI,GAC5B,MAAO,aAAgBE,EAAOC,EAAeC,QAAQJ,IAAO,UAE9DH,GAAGc,OAAO,qBAAqBE,KAAKhB,GAAGsB,IAAIhB,EAAgB,SAASH,GAClE,MAAOA,GAAEY,oBACN","file":"ad_price_vol.js","sourcesContent":["(function() {\n  const earnings_stats = [{\n      'quarter': 'Q1 2015',\n      'total_engagements': 32,\n      'cost_per_engagement': 30\n    }, {\n      'quarter': 'Q2 2015',\n      'total_engagements': 53,\n      'cost_per_engagement': 6\n    }, {\n      'quarter': 'Q3 2015',\n      'total_engagements': 165,\n      'cost_per_engagement': -39\n    }, {\n      'quarter': 'Q4 2015',\n      'total_engagements': 153,\n      'cost_per_engagement': -41\n    }, {\n      'quarter': 'Q1 2016',\n      'total_engagements': 208,\n      'cost_per_engagement': -56\n    }, {\n      'quarter': 'Q2 2016',\n      'total_engagements': 226,\n      'cost_per_engagement': -64\n    }, {\n      'quarter': 'Q3 2016',\n      'total_engagements': 91,\n      'cost_per_engagement': -44\n    }, {\n      'quarter': 'Q4 2016',\n      'total_engagements': 151,\n      'cost_per_engagement': -60\n    },\n    {\n      'quarter': 'Q1 2017',\n      'total_engagements': 139,\n      'cost_per_engagement': -63\n    }\n  ];\n  const xScale = d3.scaleLinear().domain([\n    0,\n    earnings_stats.length - 1\n  ]).range([\n    25,\n    500\n  ]);\n  const yScale = d3.scaleLinear().domain([\n    0,\n    d3.max(earnings_stats, function(d) {\n      return d.total_engagements;\n    })\n  ]).range([\n    0,\n    175\n  ]);\n\n  const bar_area = d3.select('#main_chart').append('g').attr('id', 'bar_area');\n\n  function plotStat(stat_name, stat_class, stat_label) {\n    const drawLine = d3.line()\n      .x(function(d) {\n        return xScale(earnings_stats.indexOf(d));\n      })\n      .y(function(d) {\n        return 200 - yScale(d[stat_name]);\n      });\n\n    bar_area\n      .append('path')\n      .attr('d', drawLine(earnings_stats))\n      .attr('class', stat_class);\n\n    bar_area.selectAll(`circle${[stat_class]}`)\n      .data(earnings_stats)\n      .enter()\n      .append('circle')\n      .attr('class', stat_class)\n      .attr(\"cx\", function(d) {\n        return xScale(earnings_stats.indexOf(d));\n      })\n      .attr(\"cy\", function(d) {\n        return 200 - yScale(d[stat_name]);\n      })\n      .attr(\"r\", function(d) {\n        return 5;\n      })\n      .on('click', function(d) {\n        d3.select('#bar_info').text(`${stat_label} ${(d[stat_name] >= 0) ? `grew ${d[stat_name]}` : `shrank ${d[stat_name]}`}% year-over-year in ${d.quarter}.`);\n      });\n  }\n\n  plotStat('total_engagements', 'stat_one', 'Number of ad engagements');\n  plotStat('cost_per_engagement', 'stat_two', 'Average cost-per-engagement');\n\n  bar_area.selectAll('text.x_label').data(earnings_stats).enter().append('text').attr('class', 'axis_label').text(function(d) {\n    return d.quarter;\n  }).attr('y', 300).attr('x', function(d) {\n    return xScale(earnings_stats.indexOf(d));\n  }).attr('transform', function(d) {\n    return 'rotate(90 ' + (xScale(earnings_stats.indexOf(d))) + ' 300)';\n  });\n  d3.select('text#y_axis_label').text(d3.max(earnings_stats, function(d) {\n    return d.total_engagements;\n  }) + '%');\n}());\n"]}