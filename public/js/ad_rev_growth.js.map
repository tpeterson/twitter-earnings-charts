{"version":3,"sources":["ad_rev_growth.js"],"names":["yAxisPoint","earnings_stats","advertising_revenue_growth","quarter","yScale","d3","scaleLinear","domain","range","drawLine","line","max","d","bar_area","x","xScale","indexOf","attr","selectAll","enter","append","data","select","on","text"],"mappings":"cAAC,WAKC,GAAMA,GAAa,IAEbC,IAAAA,QAAAA,UACFC,2BADoB,KAGnBC,QAAA,UACDD,2BADC,KAGAC,QAAA,UACDD,2BADC,KAGAC,QAAA,UACDD,2BADC,KAGAC,QAAA,UACDD,2BADC,KAGAC,QAAA,UACDD,2BADC,KAGAC,QAAA,UACDD,2BADC,IAGAC,QAAA,UACDD,2BADC,IAKDC,QAAW,UACXD,2BAA8B,IAU5BE,EAASC,GAAGC,cAAcC,QAG5B,EAHmCN,EAOrCD,OAAAA,IACAQ,OACA,GATF,MAYMC,EAAWJ,GAAGK,cAASH,QAC3B,EADeF,GAEZM,IAAAV,EAAY,SAAAW,GACf,MAAOZ,GAAAA,+BAEPQ,OALF,EAOAK,EAAA,KAIEA,EAAOb,GAAAA,OAAaI,eAASF,OAAAA,KAAAA,KAA7B,KAAA,YACAO,EAAAJ,GAAAK,OAAAI,EAAA,SAAAF,GACA,MAAAG,GAAAd,EAAAe,QAAAJ,MACCK,EAAAA,SAAUL,GACX,MAAOZ,GAAPI,EAAAQ,EAAAV,6BAIFW,GAASK,OAAAA,QAAUD,KAAA,IAAnBR,EAAwCR,IAAgBkB,KAAQC,QAAO,YACrEP,EAAOD,UAAP,mBAAAS,KAAApB,GAAAkB,QAAAC,OAAA,UAAAH,KAAA,QAAA,YAAAA,KAAA,KAAA,SAAAL,GADF,MAEQG,GAFRd,EAE4Be,QAAAJ,MAC1BK,KAAA,KAAOF,SAAOd,GAHhB,MAIQD,GAAaI,EAAAQ,EAASA,8BAG3BU,KAAAA,IAAO,SAAAV,GACR,MAAOA,KAD2BW,GAE/B,QAFL,SAAAX,GAlFFP,GAAAiB,OAAA,aAAAE,KAAA,iBAAAZ,EAAAT,QAAA,kBAAAS,EAAAV,2BAAA,sBA2EEW,EAASK,UAAU,gBAAgBG,KAAKpB,GAAgBkB,QAAQC,OAAO,QAAQH,KAAK,QAAS,cAAcO,KAAK,SAASZ,GACvH,MAAOA,GAAET,UACRc,KAAK,IAAK,KAAKA,KAAK,IAAK,SAASL,GACnC,MAAOG,GAAOd,EAAee,QAAQJ,MACpCK,KAAK,YAAa,SAASL,GAC5B,MAAO,aAAeG,EAAOd,EAAee,QAAQJ,IAAM,UAE5DP,GAAGiB,OAAO,qBAAqBE,KAAKnB,GAAGM,IAAIV,EAAgB,SAASW,GAClE,MAAOA,GAAEV,6BACN","file":"ad_rev_growth.js","sourcesContent":["(function() {\n  /*\n    ADJUST IN CASE AD REVENUE GROWTH TURNS NEGATIVE IN Q1\n\n  */\n  const yAxisPoint = 300; // 250 if negative\n\n  const earnings_stats = [{\n      'quarter': 'Q1 2015',\n      'advertising_revenue_growth': 72\n    }, {\n      'quarter': 'Q2 2015',\n      'advertising_revenue_growth': 63\n    }, {\n      'quarter': 'Q3 2015',\n      'advertising_revenue_growth': 60\n    }, {\n      'quarter': 'Q4 2015',\n      'advertising_revenue_growth': 48\n    }, {\n      'quarter': 'Q1 2016',\n      'advertising_revenue_growth': 37\n    }, {\n      'quarter': 'Q2 2016',\n      'advertising_revenue_growth': 18\n    }, {\n      'quarter': 'Q3 2016',\n      'advertising_revenue_growth': 6\n    }, {\n      'quarter': 'Q4 2016',\n      'advertising_revenue_growth': 0\n    },\n    {\n      'quarter': 'Q1 2017',\n      'advertising_revenue_growth': 0\n    }\n  ];\n  const xScale = d3.scaleLinear().domain([\n    0,\n    earnings_stats.length - 1\n  ]).range([\n    25,\n    500\n  ]);\n  const yScale = d3.scaleLinear().domain([\n    0,\n    d3.max(earnings_stats, function(d) {\n      return d.advertising_revenue_growth;\n    })\n  ]).range([\n    0,\n    yAxisPoint - 25\n    //225\n    //275\n  ]);\n  const bar_area = d3.select('#main_chart').append('g').attr('id', 'bar_area');\n  const drawLine = d3.line().x(function(d) {\n    return xScale(earnings_stats.indexOf(d));\n  }).y(function(d) {\n    return yAxisPoint - yScale(d.advertising_revenue_growth);\n    // return 300 - yScale(d.advertising_revenue_growth);\n    // return 250 - yScale(d.advertising_revenue_growth);\n  });\n  bar_area.append('path').attr('d', drawLine(earnings_stats)).attr('class', 'stat_one');\n  bar_area.selectAll('circle.stat_one').data(earnings_stats).enter().append('circle').attr('class', 'stat_one').attr('cx', function(d) {\n    return xScale(earnings_stats.indexOf(d));\n  }).attr('cy', function(d) {\n    return yAxisPoint - yScale(d.advertising_revenue_growth);\n    // return 300 - yScale(d.advertising_revenue_growth);\n    // return 250 - yScale(d.advertising_revenue_growth);\n  }).attr('r', function(d) {\n    return 5;\n  }).on('click', function(d) {\n    d3.select('#bar_info').text('Ad revenue in ' + d.quarter + ' increased by: ' + d.advertising_revenue_growth + '% year-over-year');\n  });\n  bar_area.selectAll('text.x_label').data(earnings_stats).enter().append('text').attr('class', 'axis_label').text(function(d) {\n    return d.quarter;\n  }).attr('y', 325).attr('x', function(d) {\n    return xScale(earnings_stats.indexOf(d));\n  }).attr('transform', function(d) {\n    return 'rotate(40 ' + xScale(earnings_stats.indexOf(d)) + ' 325)';\n  });\n  d3.select('text#y_axis_label').text(d3.max(earnings_stats, function(d) {\n    return d.advertising_revenue_growth;\n  }) + '%');\n}());\n"]}