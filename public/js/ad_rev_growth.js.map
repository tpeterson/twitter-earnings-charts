{"version":3,"sources":["ad_rev_growth.js"],"names":["yAxisPoint","quarter","earnings_stats","advertising_revenue_growth","yScale","d3","scaleLinear","domain","range","bar_area","append","attr","drawLine","selectAll","select","line","text","d","xScale","indexOf","data","enter","on","max"],"mappings":"cAAC,WAAA,GAAAA,GAAW,IAEJA,IAGFC,QAAW,UADTC,2BAAkB,KAEpBD,QAAA,UACCE,2BAAA,KAEDF,QAAA,UACCE,2BAAA,KAEDF,QAAA,UACCE,2BAAA,KAEDF,QAAA,UACCE,2BAAA,KAEDF,QAAA,UACCE,2BAAA,KAEDF,QAAA,UACCE,2BAAA,IAEDF,QAAA,UACCE,2BAAA,IAIHF,QAAA,UACEE,4BADF,KAKEF,QAAW,UACXE,4BAA+B,IAU7BC,EAASC,GAAGC,cAAcC,QAG5B,EAHmCL,EAOrCF,OAAAA,IAEFQ,OACA,GACE,MAEAJ,EAAOJ,GAAAA,cAAsBG,QAH/B,EAKAM,GAAAA,IAASC,EAAeC,SAAUC,GAClCH,MAASI,GAAAA,+BAENF,OACD,EAHFX,EAIa,KAEPS,EAASJ,GAAAS,OAAA,eAAYJ,OAAA,KAAAC,KAAA,KAAA,YACtBG,EAAOT,GAAAU,OAAaC,EAAvB,SAAAC,GAPF,MAAAC,GAAAhB,EAAAiB,QAAAF,MASAR,EAAAA,SAASI,GACP,MAAOI,GAAPb,EAAAa,EAAAd,6BAEAM,GAAOS,OAAOhB,QAAAA,KAAAA,IAAeiB,EAA7BjB,IAAAS,KAAA,QAAA,YACDF,EAAOI,UAJR,mBAIiCO,KAAAlB,GAAAmB,QAAAX,OAAA,UAAAC,KAAA,QAAA,YAAAA,KAAA,KAAA,SAAAM,GAC/B,MAAOC,GAAAhB,EAAsBA,QAAAA,MAL/BS,KAAA,KAAA,SAAAM,GAOAZ,MAAAL,GAAUI,EAAVa,EAA+BD,8BAC7BL,KAAA,IAASR,SAAAA,GADyB,MAApC,KA7EFmB,GAAA,QAAA,SAAAL,GAoEIZ,GAAGS,OAAO,aAAaE,KAAvB,iBAA6CC,EAAEhB,QAA/C,KAA0DgB,EAAEd,4BAA8B,EAAI,gBAAkB,iBAAhH,IAAmIc,EAAEd,2BAArI,sBAEFM,EAASI,UAAU,gBAAgBO,KAAKlB,GAAgBmB,QAAQX,OAAO,QAAQC,KAAK,QAAS,cAAcK,KAAK,SAASC,GACvH,MAAOA,GAAEhB,UACRU,KAAK,IAAK,KAAKA,KAAK,IAAK,SAASM,GACnC,MAAOC,GAAOhB,EAAeiB,QAAQF,MACpCN,KAAK,YAAa,SAASM,GAC5B,MAAO,aAAeC,EAAOhB,EAAeiB,QAAQF,IAAM,UAE5DZ,GAAGS,OAAO,qBAAqBE,KAAKX,GAAGkB,IAAIrB,EAAgB,SAASe,GAClE,MAAOA,GAAEd,6BACN","file":"ad_rev_growth.js","sourcesContent":["(function() {\n  // ADJUST IN CASE AD REVENUE GROWTH TURNS NEGATIVE IN Q1\n  const yAxisPoint = 250;\n\n  const earnings_stats = [{\n      'quarter': 'Q1 2015',\n      'advertising_revenue_growth': 72\n    }, {\n      'quarter': 'Q2 2015',\n      'advertising_revenue_growth': 63\n    }, {\n      'quarter': 'Q3 2015',\n      'advertising_revenue_growth': 60\n    }, {\n      'quarter': 'Q4 2015',\n      'advertising_revenue_growth': 48\n    }, {\n      'quarter': 'Q1 2016',\n      'advertising_revenue_growth': 37\n    }, {\n      'quarter': 'Q2 2016',\n      'advertising_revenue_growth': 18\n    }, {\n      'quarter': 'Q3 2016',\n      'advertising_revenue_growth': 6\n    }, {\n      'quarter': 'Q4 2016',\n      'advertising_revenue_growth': 0\n    },\n    {\n      'quarter': 'Q1 2017',\n      'advertising_revenue_growth': -11\n    },\n    {\n      'quarter': 'Q2 2017',\n      'advertising_revenue_growth': -8\n    }\n  ];\n  const xScale = d3.scaleLinear().domain([\n    0,\n    earnings_stats.length - 1\n  ]).range([\n    25,\n    500\n  ]);\n  const yScale = d3.scaleLinear().domain([\n    0,\n    d3.max(earnings_stats, function(d) {\n      return d.advertising_revenue_growth;\n    })\n  ]).range([\n    0,\n    yAxisPoint - 25\n  ]);\n  const bar_area = d3.select('#main_chart').append('g').attr('id', 'bar_area');\n  const drawLine = d3.line().x(function(d) {\n    return xScale(earnings_stats.indexOf(d));\n  }).y(function(d) {\n    return yAxisPoint - yScale(d.advertising_revenue_growth);\n  });\n  bar_area.append('path').attr('d', drawLine(earnings_stats)).attr('class', 'stat_one');\n  bar_area.selectAll('circle.stat_one').data(earnings_stats).enter().append('circle').attr('class', 'stat_one').attr('cx', function(d) {\n    return xScale(earnings_stats.indexOf(d));\n  }).attr('cy', function(d) {\n    return yAxisPoint - yScale(d.advertising_revenue_growth);\n  }).attr('r', function(d) {\n    return 5;\n  }).on('click', function(d) {\n    d3.select('#bar_info').text(`Ad revenue in ${d.quarter} ${d.advertising_revenue_growth >= 0 ? 'increased by:' : 'decreased by:'} ${d.advertising_revenue_growth}% year-over-year`);\n  });\n  bar_area.selectAll('text.x_label').data(earnings_stats).enter().append('text').attr('class', 'axis_label').text(function(d) {\n    return d.quarter;\n  }).attr('y', 325).attr('x', function(d) {\n    return xScale(earnings_stats.indexOf(d));\n  }).attr('transform', function(d) {\n    return 'rotate(40 ' + xScale(earnings_stats.indexOf(d)) + ' 325)';\n  });\n  d3.select('text#y_axis_label').text(d3.max(earnings_stats, function(d) {\n    return d.advertising_revenue_growth;\n  }) + '%');\n}());\n"]}