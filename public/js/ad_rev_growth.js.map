{"version":3,"sources":["ad_rev_growth.js"],"names":["yAxisPoint","quarter","earnings_stats","advertising_revenue_growth","xScale","d3","scaleLinear","domain","range","yScale","d","max","bar_area","append","select","attr","drawLine","line","x","indexOf","y","selectAll","data","enter","on","text"],"mappings":"cAAC,WAAA,GAAAA,GAAW,IAEJA,IAGFC,QAAW,UADTC,2BAAkB,KAEpBD,QAAA,UACCE,2BAAA,KAEDF,QAAA,UACCE,2BAAA,KAEDF,QAAA,UACCE,2BAAA,KAEDF,QAAA,UACCE,2BAAA,KAEDF,QAAA,UACCE,2BAAA,KAEDF,QAAA,UACCE,2BAAA,IAEDF,QAAA,UACCE,2BAAA,IAIHF,QAAA,UACEE,2BADF,IAKIC,EAASC,GAAGC,cAAcC,QAOhC,EAGIL,EAASC,OAAAA,IAHEK,OASf,GACA,MAEKC,EAASC,GAAGJ,cAAAC,QACf,EAHFF,GAAAM,IAAAT,EAAA,SAAAQ,GAKAE,MAASC,GAAAA,+BAEPL,OADF,EAGER,EAAOA,KAEPY,EAAAP,GAAAS,OAAA,eAAAD,OAAA,KAAAE,KAAA,KAAA,YACIC,EAASX,GAAAY,OAAAC,EAAY,SAAAR,GACzBL,MAAGS,GAAOZ,EAAViB,QAAAT,MAPFU,EAAA,SAAAV,GASAE,MAASS,GAAUZ,EAAAC,EAAAP,6BAElBS,GAAOC,OAFR,QAEuBE,KAAK,IAAAC,EAAYd,IAAAa,KAAA,QAAA,YACtCH,EAAOR,UAAOF,mBAAAoB,KAAdpB,GAAAqB,QAAAV,OAAA,UAAAE,KAAA,QAAA,YAAAA,KAAA,KAAA,SAAAL,GAHF,MAIQN,GAAAF,EAAsBQ,QAAGA,MAC/BK,KAAA,KAAO,SAAAL,GALT,MAAAV,GAAAS,EAAAC,EAAAP,8BAOGW,KAAAA,IAAO,SAAAJ,GACR,MAAOA,KAD2Bc,GAE/B,QAFL,SAAAd,GAzEFL,GAAAS,OAAA,aAAAW,KAAA,iBAAAf,EAAAT,QAAA,KAAAS,EAAAP,4BAAA,EAAA,gBAAA,iBAAA,IAAAO,EAAAP,2BAAA,sBAkEES,EAASS,UAAU,gBAAgBC,KAAKpB,GAAgBqB,QAAQV,OAAO,QAAQE,KAAK,QAAS,cAAcU,KAAK,SAASf,GACvH,MAAOA,GAAET,UACRc,KAAK,IAAK,KAAKA,KAAK,IAAK,SAASL,GACnC,MAAON,GAAOF,EAAeiB,QAAQT,MACpCK,KAAK,YAAa,SAASL,GAC5B,MAAO,aAAeN,EAAOF,EAAeiB,QAAQT,IAAM,UAE5DL,GAAGS,OAAO,qBAAqBW,KAAKpB,GAAGM,IAAIT,EAAgB,SAASQ,GAClE,MAAOA,GAAEP,6BACN","file":"ad_rev_growth.js","sourcesContent":["(function() {\n  // ADJUST IN CASE AD REVENUE GROWTH TURNS NEGATIVE IN Q1\n  const yAxisPoint = 300; // 300 if positive or flat, 250 if negative\n\n  const earnings_stats = [{\n      'quarter': 'Q1 2015',\n      'advertising_revenue_growth': 72\n    }, {\n      'quarter': 'Q2 2015',\n      'advertising_revenue_growth': 63\n    }, {\n      'quarter': 'Q3 2015',\n      'advertising_revenue_growth': 60\n    }, {\n      'quarter': 'Q4 2015',\n      'advertising_revenue_growth': 48\n    }, {\n      'quarter': 'Q1 2016',\n      'advertising_revenue_growth': 37\n    }, {\n      'quarter': 'Q2 2016',\n      'advertising_revenue_growth': 18\n    }, {\n      'quarter': 'Q3 2016',\n      'advertising_revenue_growth': 6\n    }, {\n      'quarter': 'Q4 2016',\n      'advertising_revenue_growth': 0\n    },\n    {\n      'quarter': 'Q1 2017',\n      'advertising_revenue_growth': 0\n    }\n  ];\n  const xScale = d3.scaleLinear().domain([\n    0,\n    earnings_stats.length - 1\n  ]).range([\n    25,\n    500\n  ]);\n  const yScale = d3.scaleLinear().domain([\n    0,\n    d3.max(earnings_stats, function(d) {\n      return d.advertising_revenue_growth;\n    })\n  ]).range([\n    0,\n    yAxisPoint - 25\n  ]);\n  const bar_area = d3.select('#main_chart').append('g').attr('id', 'bar_area');\n  const drawLine = d3.line().x(function(d) {\n    return xScale(earnings_stats.indexOf(d));\n  }).y(function(d) {\n    return yAxisPoint - yScale(d.advertising_revenue_growth);\n  });\n  bar_area.append('path').attr('d', drawLine(earnings_stats)).attr('class', 'stat_one');\n  bar_area.selectAll('circle.stat_one').data(earnings_stats).enter().append('circle').attr('class', 'stat_one').attr('cx', function(d) {\n    return xScale(earnings_stats.indexOf(d));\n  }).attr('cy', function(d) {\n    return yAxisPoint - yScale(d.advertising_revenue_growth);\n  }).attr('r', function(d) {\n    return 5;\n  }).on('click', function(d) {\n    d3.select('#bar_info').text(`Ad revenue in ${d.quarter} ${d.advertising_revenue_growth >= 0 ? 'increased by:' : 'decreased by:'} ${d.advertising_revenue_growth}% year-over-year`);\n  });\n  bar_area.selectAll('text.x_label').data(earnings_stats).enter().append('text').attr('class', 'axis_label').text(function(d) {\n    return d.quarter;\n  }).attr('y', 325).attr('x', function(d) {\n    return xScale(earnings_stats.indexOf(d));\n  }).attr('transform', function(d) {\n    return 'rotate(40 ' + xScale(earnings_stats.indexOf(d)) + ' 325)';\n  });\n  d3.select('text#y_axis_label').text(d3.max(earnings_stats, function(d) {\n    return d.advertising_revenue_growth;\n  }) + '%');\n}());\n"]}