{"version":3,"sources":["topline.js"],"names":["earnings_stats","quarter","advertising_revenue","net_income","total_revenue","xScale","scaleLinear","range","d3","domain","bar_area","attr","max","d","yScale","selectAll","data","enter","append","bar_width","select","i","indexOf","abs","on","text","Math"],"mappings":"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","file":"topline.js","sourcesContent":["(function() {\n  const earnings_stats = [{\n      'quarter': 'Q1 2015',\n      'total_revenue': 436,\n      'advertising_revenue': 388.2,\n      'net_income': -162.4\n    }, {\n      'quarter': 'Q2 2015',\n      'total_revenue': 502.4,\n      'advertising_revenue': 452.3,\n      'net_income': -136.7\n    }, {\n      'quarter': 'Q3 2015',\n      'total_revenue': 569.2,\n      'advertising_revenue': 512.9,\n      'net_income': -131.7\n    }, {\n      'quarter': 'Q4 2015',\n      'total_revenue': 710.5,\n      'advertising_revenue': 640.7,\n      'net_income': -90.2\n    }, {\n      'quarter': 'Q1 2016',\n      'total_revenue': 594.5,\n      'advertising_revenue': 530.7,\n      'net_income': -79.7\n    }, {\n      'quarter': 'Q2 2016',\n      'total_revenue': 602,\n      'advertising_revenue': 534.5,\n      'net_income': -107.2\n    }, {\n      'quarter': 'Q3 2016',\n      'total_revenue': 615.9,\n      'advertising_revenue': 545.0,\n      'net_income': -103\n    },\n    {\n      'quarter': 'Q4 2016',\n      'total_revenue': 717.2,\n      'advertising_revenue': 637.8,\n      'net_income': -167\n    },\n    {\n      'quarter': 'Q1 2017',\n      'total_revenue': 548.3,\n      'advertising_revenue': 473.8,\n      'net_income': -61.6\n    },\n    {\n      'quarter': 'Q2 2017',\n      'total_revenue': 573.9,\n      'advertising_revenue': 489.1,\n      'net_income': -107\n    },\n    {\n      'quarter': 'Q3 2017',\n      'total_revenue': 589.6,\n      'advertising_revenue': 502.8,\n      'net_income': -21.1\n    }\n  ];\n  const xScale = d3.scaleLinear().domain([\n    0,\n    earnings_stats.length - 1\n  ]).range([\n    25,\n    700\n  ]);\n  const yScale = d3.scaleLinear().domain([\n    0,\n    d3.max(earnings_stats, function(d) {\n      return d.total_revenue;\n    })\n  ]).range([\n    0,\n    175\n  ]);\n  const bar_width = 25;\n  const bar_area = d3.select('#main_chart').append('g').attr('id', 'bar_area');\n  bar_area.selectAll('rect.stat_one').data(earnings_stats).enter().append('rect').attr('class', 'stat_one').attr('width', bar_width).attr('height', function(d) {\n    return yScale(d.total_revenue);\n  }).attr('x', function(d, i) {\n    return xScale(earnings_stats.indexOf(d));\n  }).attr('y', function(d) {\n    return 200 - yScale(d.total_revenue);\n  }).on('click', function(d) {\n    d3.select('#bar_info').text('Total revenue in ' + d.quarter + ': $' + d.total_revenue + ' million');\n  });\n  bar_area.selectAll('rect.stat_two').data(earnings_stats).enter().append('rect').attr('class', 'stat_two').attr('width', bar_width).attr('height', function(d) {\n    return yScale(d.advertising_revenue);\n  }).attr('x', function(d, i) {\n    return xScale(earnings_stats.indexOf(d)) + bar_width;\n  }).attr('y', function(d) {\n    return 200 - yScale(d.advertising_revenue);\n  }).on('click', function(d) {\n    d3.select('#bar_info').text('Advertising revenue in ' + d.quarter + ': $' + d.advertising_revenue + ' million');\n  });\n  bar_area.selectAll('rect.stat_three').data(earnings_stats).enter().append('rect').attr('class', 'stat_three').attr('width', bar_width).attr('height', function(d) {\n    return yScale(Math.abs(d.net_income));\n  }).attr('x', function(d, i) {\n    return xScale(earnings_stats.indexOf(d)) + bar_width + bar_width;\n  }).attr('y', function(d) {\n    return d.net_income > 0 ? 200 - yScale(d.net_income) : 200;\n  }).on('click', function(d) {\n    d3.select('#bar_info').text('Net income in ' + d.quarter + ': ' + (d.net_income > 0 ? '$' + d.net_income : '-$' + Math.abs(d.net_income)) + ' million');\n  });\n  bar_area.selectAll('text.x_label').data(earnings_stats).enter().append('text').attr('class', 'axis_label').text(function(d) {\n    return d.quarter;\n  }).attr('y', 205).attr('x', function(d) {\n    return xScale(earnings_stats.indexOf(d));\n  }).attr('transform', function(d) {\n    return 'rotate(90 ' + (xScale(earnings_stats.indexOf(d))) + ' 205)';\n  });\n  d3.select('text#y_axis_label').text('$' + d3.max(earnings_stats, function(d) {\n    return d.total_revenue;\n  }) + ' million');\n}());\n"]}