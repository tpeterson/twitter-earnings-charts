{"version":3,"sources":["topline.js"],"names":["earnings_stats","quarter","total_revenue","advertising_revenue","net_income","xScale","d3","scaleLinear","domain","range","bar_area","select","max","yScale","d","attr","bar_width","selectAll","enter","append","indexOf","text","Math","data","abs"],"mappings":"cAAC,WACC,GAAMA,KADPC,QAAW,UACVC,cAAMF,IACJG,oBADsB,MAEtBC,YAAA,QAEAH,QAAA,UAJqBC,cAKpB,MACDC,oBADC,MAEDC,YAAA,QAEAH,QAAA,UATqBC,cAUpB,MACDC,oBADC,MAEDC,YAAA,QAEAH,QAAA,UAdqBC,cAepB,MACDC,oBADC,MAEDC,YAAA,OAEAH,QAAA,UAnBqBC,cAoBpB,MACDC,oBADC,MAEDC,YAAA,OAEAH,QAAA,UAxBqBC,cAyBpB,IACDC,oBADC,MAEDC,YAAA,QAEAH,QAAA,UA7BqBC,cA8BpB,MACDC,oBADC,IAEDC,YAAA,MAEAC,EAAAC,GAAeC,cAAAC,QAlCjB,EAoCAR,EAAkBO,OAAAA,IAOlBE,OAGI,GAHmC,MAUjCC,EAAWJ,GAAGK,cAAOH,QAC3BE,EACEJ,GAAAM,IAAOC,EAASX,SAAhBY,GACCC,MAFHD,GAEaZ,kBAEVa,OACD,EALF,MAAAC,EAAA,GASAN,EAASO,GAAUN,OAAA,eAAsBX,OAAAA,KAAAA,KAAgBkB,KAAQC,WAC/DT,GAAOG,UAASV,iBAAAA,KAAhBH,GAAAkB,QAAAC,OAAA,QAAAJ,KAAA,QAAA,YAAAA,KAAA,QAAAC,GAAAD,KAAA,SAAA,SAAAD,GADF,MAEQD,GAAKC,EAAAZ,iBACXa,KAAA,IAAOV,SAAOL,EAAAA,GAHhB,MAIQK,GAAKL,EAAYoB,QAAAN,MACvBC,KAAA,IAAO,SAAaD,GALtB,MAMM,KAASD,EAAAC,EAAAZ,iBACbI,GAAGK,QAAO,SAAVG,GAPFR,GAAAK,OAAA,aAAAU,KAAA,oBAAAP,EAAAb,QAAA,MAAAa,EAAAZ,cAAA,cAUEQ,EAAOG,UAAOS,iBAAWlB,KAAzBJ,GAAAkB,QAAAC,OAAA,QAAAJ,KAAA,QAAA,YAAAA,KAAA,QAAAC,GAAAD,KAAA,SAAA,SAAAD,GADF,MAEQD,GAAKC,EAAAX,uBACXY,KAAA,IAAOV,SAAOL,EAAAA,GAHhB,MAIQK,GAAKL,EAAYoB,QAAAN,IAAAE,IACvBD,KAAA,IAASX,SAAFU,GALT,MAMM,KAASD,EAAAC,EAAAX,uBACbG,GAAGK,QAAO,SAAVG,GAPFR,GAAAK,OAAA,aAAAU,KAAA,0BAAAP,EAAAb,QAAA,MAAAa,EAAAX,oBAAA,cAUEO,EAAOI,UAAP,mBAAAS,KAAAvB,GAAAkB,QAAAC,OAAA,QAAAJ,KAAA,QAAA,cAAAA,KAAA,QAAAC,GAAAD,KAAA,SAAA,SAAAD,GADF,MAEQD,GAFRS,KAEkBP,IAAKD,EAFvBV,eAGEW,KAAA,IAAOV,SAAOL,EAAAA,GAHhB,MAIQK,GAAAL,EAAsBc,QAAGA,IAAAE,EAAAA,IAC/BD,KAAA,IAAO,SAAAD,GALT,MAAAA,GAAAV,WAAA,EAAA,IAAAS,EAAAC,EAAAV,YAAA,MAOGO,GAAAA,QAAO,SAAAG,GACRR,GAAAK,OAAST,aAATmB,KAAA,iBAAAP,EAAAb,QAAA,MAAAa,EAAAV,WAAA,EAAA,IAAAU,EAAAV,WAAA,KAAAkB,KAAAE,IAAAV,EAAAV,aAAA,cA1FHM,EAADO,UAAA,gBAAAM,KAAAvB,GAAAkB,QAAAC,OAAA,QAAAJ,KAAA,QAAA,cAAAM,KAAA,SAAAP,GAmFI,MAAOA,GAAEb,UACRc,KAAK,IAAK,KAAKA,KAAK,IAAK,SAASD,GACnC,MAAOT,GAAOL,EAAeoB,QAAQN,MACpCC,KAAK,YAAa,SAASD,GAC5B,MAAO,aAAgBT,EAAOL,EAAeoB,QAAQN,IAAO,UAE9DR,GAAGK,OAAO,qBAAqBU,KAAK,IAAMf,GAAGM,IAAIZ,EAAgB,SAASc,GACxE,MAAOA,GAAEZ,gBACN","file":"topline.js","sourcesContent":["(function() {\n  const earnings_stats = [{\n    'quarter': 'Q1 2015',\n    'total_revenue': 436,\n    'advertising_revenue': 388.2,\n    'net_income': -162.4\n  }, {\n    'quarter': 'Q2 2015',\n    'total_revenue': 502.4,\n    'advertising_revenue': 452.3,\n    'net_income': -136.7\n  }, {\n    'quarter': 'Q3 2015',\n    'total_revenue': 569.2,\n    'advertising_revenue': 512.9,\n    'net_income': -131.7\n  }, {\n    'quarter': 'Q4 2015',\n    'total_revenue': 710.5,\n    'advertising_revenue': 640.7,\n    'net_income': -90.2\n  }, {\n    'quarter': 'Q1 2016',\n    'total_revenue': 594.5,\n    'advertising_revenue': 530.7,\n    'net_income': -79.7\n  }, {\n    'quarter': 'Q2 2016',\n    'total_revenue': 602,\n    'advertising_revenue': 534.5,\n    'net_income': -107.2\n  }, {\n    'quarter': 'Q3 2016',\n    'total_revenue': 615.9,\n    'advertising_revenue': 545.0,\n    'net_income': -103\n  }];\n  const xScale = d3.scaleLinear().domain([\n    0,\n    earnings_stats.length - 1\n  ]).range([\n    25,\n    700\n  ]);\n  const yScale = d3.scaleLinear().domain([\n    0,\n    d3.max(earnings_stats, function(d) {\n      return d.total_revenue;\n    })\n  ]).range([\n    0,\n    175\n  ]);\n  const bar_width = 25;\n  const bar_area = d3.select('#main_chart').append('g').attr('id', 'bar_area');\n  bar_area.selectAll('rect.stat_one').data(earnings_stats).enter().append('rect').attr('class', 'stat_one').attr('width', bar_width).attr('height', function(d) {\n    return yScale(d.total_revenue);\n  }).attr('x', function(d, i) {\n    return xScale(earnings_stats.indexOf(d));\n  }).attr('y', function(d) {\n    return 200 - yScale(d.total_revenue);\n  }).on('click', function(d) {\n    d3.select('#bar_info').text('Total revenue in ' + d.quarter + ': $' + d.total_revenue + ' million');\n  });\n  bar_area.selectAll('rect.stat_two').data(earnings_stats).enter().append('rect').attr('class', 'stat_two').attr('width', bar_width).attr('height', function(d) {\n    return yScale(d.advertising_revenue);\n  }).attr('x', function(d, i) {\n    return xScale(earnings_stats.indexOf(d)) + bar_width;\n  }).attr('y', function(d) {\n    return 200 - yScale(d.advertising_revenue);\n  }).on('click', function(d) {\n    d3.select('#bar_info').text('Advertising revenue in ' + d.quarter + ': $' + d.advertising_revenue + ' million');\n  });\n  bar_area.selectAll('rect.stat_three').data(earnings_stats).enter().append('rect').attr('class', 'stat_three').attr('width', bar_width).attr('height', function(d) {\n    return yScale(Math.abs(d.net_income));\n  }).attr('x', function(d, i) {\n    return xScale(earnings_stats.indexOf(d)) + bar_width + bar_width;\n  }).attr('y', function(d) {\n    return d.net_income > 0 ? 200 - yScale(d.net_income) : 200;\n  }).on('click', function(d) {\n    d3.select('#bar_info').text('Net income in ' + d.quarter + ': ' + (d.net_income > 0 ? '$' + d.net_income : '-$' + Math.abs(d.net_income)) + ' million');\n  });\n  bar_area.selectAll('text.x_label').data(earnings_stats).enter().append('text').attr('class', 'axis_label').text(function(d) {\n    return d.quarter;\n  }).attr('y', 205).attr('x', function(d) {\n    return xScale(earnings_stats.indexOf(d));\n  }).attr('transform', function(d) {\n    return 'rotate(90 ' + (xScale(earnings_stats.indexOf(d))) + ' 205)';\n  });\n  d3.select('text#y_axis_label').text('$' + d3.max(earnings_stats, function(d) {\n    return d.total_revenue;\n  }) + ' million');\n}());\n"]}